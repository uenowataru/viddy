var queue = [];
var queuegif = [];
var subreddits = ['videos', 'gifs', 'all', 'youtubehaiku', 'deepintoyoutube', 'StandUpComedy', 'fail', 'ContagiousLaughter',
	'todayilearned', 'LearnUselessTalents','Music', 'listentothis', 'hiphopheads','sports' , 'nba', 'soccer', 'nfl',
	'UnexpectedThugLife', 'space', 'PublicFreakout', 'StreetFights', 'respectporn'];
var subrednum = 0;
var last = "null";
var resourceUrl = "https://www.reddit.com/r/videos/.json?&limit=60&jsonp=?";

//gfyCollection.init();

function loadVideos() {
	if(subrednum == subreddits.length){
		return;
	}
	//var resourceUrl = "http://www.reddit.com/domain/youtube.com.json?jsonp=?";
	//resourceUrl = "http://www.reddit.com/r/all/.json?jsonp=?";
	//resourceUrl = "http://www.reddit.com/r/videos/.json?jsonp=?";
	resourceUrl = "https://www.reddit.com/r/"+subreddits[subrednum++]+"/.json?limit=60&jsonp=?";

	return $.getJSON(resourceUrl, function(data) {
		$.each(data.data.children, function(i, item){
			var dom = item.data.domain;
			if(dom == "youtube.com"){
				var vidurl;
				if(item.data.secure_media != null && item.data.secure_media != undefined){
					vidurl = item.data.secure_media.oembed.url;
				}else if(item.data.media != null && item.data.secure_media != undefined){
					vidurl = item.data.media.oembed.url;
				}
				if(vidurl != null && vidurl != undefined)
					queue.push(vidurl.substring(vidurl.indexOf('v=')+2));
			}
		});
		last = data.data.after;
		//resourceUrl = "https://www.reddit.com/r/"+subreddits[++subrednum]+"/.json?limit=60&after=" + last + "&jsonp=?";
	});	
}


function loadGifs() {
	resourceUrl = "https://www.reddit.com/r/gifs/.json?limit=60&jsonp=?";

	return $.getJSON(resourceUrl, function(data) {
		$.each(data.data.children, function(i, item){
			var dom = item.data.domain;
			if(dom == "i.imgur.com"){
				var gifurl = item.data.url;
				queuegif.push(gifurl);
			}
		});
		last = data.data.after;
		resourceUrl = "https://www.reddit.com/r/gifs/.json?limit=60&jsonp=?";
		//resourceUrl = "https://www.reddit.com/r/"+subreddits[++subrednum]+"/.json?limit=60&after=" + last + "&jsonp=?";
	});
}





