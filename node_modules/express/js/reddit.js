var queue = [];
var subreddits = ['videos', 'gifs', 'all', 'youtubehaiku', 'deepintoyoutube', 'StandUpComedy', 'fail', 'gopro', 'ContagiousLaughter',
	'todayilearned', 'LearnUselessTalents','Music', 'listentothis', 'hiphopheads','sports' , 'nba', 'soccer', 'nfl',
	'UnexpectedThugLife', 'space', 'PublicFreakout', 'StreetFights', 'respectporn'];
var banned = ['leagueoflegends','hearthstone','smashbros','tf2','DotA2','gamegrumps','2007scape', 'wow', 'GrandTheftAutoV_PC'];
var subrednum = 0;
var last = "null";
var resourceUrl;

function loadVideos() {
	if(subrednum == subreddits.length) return;
	//resourceUrl = "https://www.reddit.com/r/all/.json?limit=60&after=" + last;
	resourceUrl = "https://www.reddit.com/domain/youtube.com/.json?limit=60&after=" + last;

	return $.getJSON(resourceUrl, getVideos);
}


function getVideos(data) {
	$.each(data.data.children, function(i, item){
		var dom = item.data.domain;
		if(!isBanned(item.data.subreddit) && dom == "youtube.com"){
			var vidurl = item.data.url;
			// if(item.data.secure_media != null && item.data.secure_media != undefined){
			// 	vidurl = item.data.secure_media.oembed.url;
			// }else if(item.data.media != null && item.data.secure_media != undefined){
			// 	vidurl = item.data.media.oembed.url;
			// }
			if(vidurl != null && vidurl != undefined){
				var vidtitle = item.data.title;
				queue.push([vidurl.substring(vidurl.indexOf('v=')+2), vidtitle]);
			}
		}
	});
	last = data.data.after;
}

function isBanned(subreddit){
	for(var i = 0; i < banned.length; i++){
		if(banned[i]==subreddit){
			return true;
		}
	}
	return false;
}

/*
function loadGifs() {
	resourceUrl = "https://www.reddit.com/r/gifs/.json?limit=60&jsonp=?";
	return $.getJSON(resourceUrl, function(data) {
		$.each(data.data.children, function(i, item){
			var dom = item.data.domain;
			if(dom == "i.imgur.com"){
				var gifurl = item.data.url;
				queuegif.push(gifurl);
			}
		});
		last = data.data.after;
		resourceUrl = "https://www.reddit.com/r/gifs/.json?limit=60&jsonp=?";
	});
}
*/