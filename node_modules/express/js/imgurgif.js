$(document).ready(function(){
	loadGifs().always(function() { //is returned as deffered object
		//nextGif();
		//onGifEnded();
	});
});

var gifcurrindex = 0;
var currgif;
function nextGif(){
	while(gifcurrindex < queuegif.length && queuegif[gifcurrindex].substring(queuegif[gifcurrindex].length-1) != 'v'){
		gifcurrindex++;
	}
	if(gifcurrindex == queuegif.length){
		alert('done');
		return;
	}
	currgif = queuegif[gifcurrindex++];
	var gifurl = currgif.substring(currgif.indexOf('//')); //  //imgur.com/
	gifurl = gifurl.substring(0,gifurl.indexOf('.gif'));
	document.getElementById("gifvmp4").src = gifurl + '.mp4';
	document.getElementById("gifvwebm").src = gifurl + '.webm';
}

function onGifEnded(){
	document.getElementById("gifvideo").pause();
	var gifv = document.getElementById("gifvideo");
	document.getElementById("gifvideo").play();
	document.getElementById("gifvideo").load();
	nextGif();
}
